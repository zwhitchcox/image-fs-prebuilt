{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\zwhit\\\\dev\\\\cruster\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\zwhit\\\\dev\\\\cruster\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\zwhit\\\\dev\\\\cruster\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import ActionsContext from'../Contexts/ActionsContext';var statuses={DOWNLOADING:\"Downloading...\",INACTIVE:\"\",UNZIPPING:\"Unzipping...\"};var Download=function Download(){var DOWNLOADING=statuses.DOWNLOADING,INACTIVE=statuses.INACTIVE,UNZIPPING=statuses.UNZIPPING;var _useState=useState(INACTIVE),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useContext=useContext(ActionsContext),runAction=_useContext.runAction;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),downloadPercentage=_useState4[0],setDownloadPercentage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),unzipPercentage=_useState6[0],setUnzipPercentage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),forceRedownload=_useState8[0],setForceRedownload=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),forceReunzip=_useState10[0],setForceReunzip=_useState10[1];var run=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(status!==INACTIVE)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;setStatus(DOWNLOADING);_context.next=6;return runAction({status:\"Downloading image...\",type:\"download-image\",args:{force:forceRedownload},onProgress:function onProgress(_ref2){var percentage=_ref2.percentage;return setDownloadPercentage(percentage);}});case 6:setStatus(UNZIPPING);_context.next=9;return runAction({status:\"Unzipping image...\",type:\"unzip-image\",args:{force:forceReunzip},onProgress:function onProgress(_ref3){var percentage=_ref3.percentage;return setUnzipPercentage(percentage);}});case 9:setStatus(INACTIVE);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);setStatus(INACTIVE);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function run(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"boxed\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"top-margin\"},\"Download Disk Image\"),/*#__PURE__*/React.createElement(\"div\",{className:\"checkbox-options\"},/*#__PURE__*/React.createElement(\"label\",{className:\"checkbox-container indent-1\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:forceRedownload,onChange:function onChange(){return setForceRedownload(!forceRedownload);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"checkmark\"}),\"Force Re-Download\"),/*#__PURE__*/React.createElement(\"label\",{className:\"checkbox-container indent-1\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:forceReunzip,onChange:function onChange(){return setForceReunzip(!forceReunzip);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"checkmark\"}),\"Overwrite node.img\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{onClick:run},\"Download Image\"),/*#__PURE__*/React.createElement(\"br\",null),status!==DOWNLOADING?\"\":/*#__PURE__*/React.createElement(ProgressBar,{percentage:downloadPercentage,title:DOWNLOADING}),status!==UNZIPPING?\"\":/*#__PURE__*/React.createElement(ProgressBar,{percentage:unzipPercentage,title:UNZIPPING}));};export default Download;var ProgressBar=function ProgressBar(_ref4){var percentage=_ref4.percentage,title=_ref4.title;return/*#__PURE__*/React.createElement(React.Fragment,null,title?/*#__PURE__*/React.createElement(\"div\",{className:\"progress-title\"},title):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-percentage\"},\"\".concat(percentage.toPrecision(3),\"%\")),/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar-bg\"}),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"\".concat(percentage,\"%\")},className:\"progress-bar-progress\"}))));};","map":{"version":3,"sources":["C:/Users/zwhit/dev/cruster/app/src/Image/Download.tsx"],"names":["React","useState","useContext","ActionsContext","statuses","DOWNLOADING","INACTIVE","UNZIPPING","Download","status","setStatus","runAction","downloadPercentage","setDownloadPercentage","unzipPercentage","setUnzipPercentage","forceRedownload","setForceRedownload","forceReunzip","setForceReunzip","run","type","args","force","onProgress","percentage","ProgressBar","title","toPrecision","width"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from \"react\"\r\nimport { v4 } from 'uuid'\r\nimport ActionsContext from '../Contexts/ActionsContext';\r\n\r\nconst statuses = {\r\n  DOWNLOADING: \"Downloading...\",\r\n  INACTIVE: \"\",\r\n  UNZIPPING: \"Unzipping...\",\r\n}\r\n\r\nconst Download = () => {\r\n  const {\r\n    DOWNLOADING,\r\n    INACTIVE,\r\n    UNZIPPING,\r\n  } = statuses\r\n\r\n  const [status, setStatus] = useState(INACTIVE)\r\n\r\n  const {runAction} = useContext(ActionsContext)\r\n\r\n  const [downloadPercentage, setDownloadPercentage] = useState(0)\r\n  const [unzipPercentage, setUnzipPercentage] = useState(0)\r\n\r\n  const [forceRedownload, setForceRedownload] = useState(false)\r\n  const [forceReunzip, setForceReunzip] = useState(false)\r\n  const run = async () => {\r\n    if (status !== INACTIVE) return\r\n    try {\r\n      setStatus(DOWNLOADING)\r\n      await runAction({\r\n        status: \"Downloading image...\",\r\n        type: \"download-image\",\r\n        args: {force: forceRedownload},\r\n        onProgress: ({percentage}) => setDownloadPercentage(percentage),\r\n      })\r\n      setStatus(UNZIPPING)\r\n      await runAction({\r\n        status: \"Unzipping image...\",\r\n        type: \"unzip-image\",\r\n        args: {force: forceReunzip},\r\n        onProgress: ({percentage}) => setUnzipPercentage(percentage),\r\n      })\r\n      setStatus(INACTIVE)\r\n    } catch (err) {\r\n      setStatus(INACTIVE)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"boxed\">\r\n      <h3 className=\"top-margin\">Download Disk Image</h3>\r\n      <div className=\"checkbox-options\">\r\n        <label className=\"checkbox-container indent-1\">\r\n          <input type=\"checkbox\"\r\n            checked={forceRedownload}\r\n            onChange={() => setForceRedownload(!forceRedownload)}\r\n          />\r\n          <span className=\"checkmark\" />\r\n          Force Re-Download\r\n        </label>\r\n        <label className=\"checkbox-container indent-1\">\r\n          <input type=\"checkbox\"\r\n            checked={forceReunzip}\r\n            onChange={() => setForceReunzip(!forceReunzip)}\r\n          />\r\n          <span className=\"checkmark\" />\r\n          Overwrite node.img\r\n        </label>\r\n      </div>\r\n      <br />\r\n      <button onClick={run}>Download Image</button>\r\n      <br />\r\n      {status !== DOWNLOADING ? \"\" : <ProgressBar percentage={downloadPercentage} title={DOWNLOADING} />}\r\n      {status !== UNZIPPING ? \"\" : <ProgressBar percentage={unzipPercentage} title={UNZIPPING} />}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Download\r\n\r\nconst ProgressBar = ({percentage, title}) => (\r\n  <>\r\n  {title ? <div className=\"progress-title\">{title}</div> : \"\"}\r\n  <div className=\"progress-bar\">\r\n    <div className=\"progress-percentage\">{`${percentage.toPrecision(3)}%`}</div>\r\n    <div className=\"progress-bar-container\">\r\n      <div className=\"progress-bar-bg\" />\r\n      <div\r\n        style={{width: `${percentage}%`}}\r\n        className=\"progress-bar-progress\"\r\n      />\r\n    </div>\r\n  </div>\r\n  </>\r\n)"]},"metadata":{},"sourceType":"module"}